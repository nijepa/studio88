<template>
  <div class="">
    <transition name="fall" mode="out-in">
      <div v-if="loadingState" class="" key="1">
        <img src="../assets/img/loading1.gif" alt="" class="loading">
        loading ...
      </div>
      <div v-else class="schedule__wrapper" key="2">
        <form @submit.prevent="addClient()" method="post" class="user__form">
          <div class="input__group">
            <div class="input__field">
              <label for="active">Aktivna</label>
              <input type="checkbox" name="active" placeholder="ime" checked="checked" id="active"
                      class="login_input user_input check_active" v-model="clientInput.active">
            </div>
            <div class="input__field">
              <label for="date_start">Datum upisa</label>
              <input type="date" id="date_start" placeholder="datum upisa"
                      class="login_input user_input" :value="clientInput.date_started && makeCorrectDate(clientInput.date_started) | formatDate"
                      @input="clientInput.date_started = $event.target.valueAsDate">
            </div>
          </div>

          <div class="input__group">
            <div class="input__field">
              <label for="first_name">Ime</label>
              <input type="text" name="first_name" placeholder="ime" required id="first_name"
                      class="login_input user_input" v-model="clientInput.first_name">
            </div>
            <div class="input__field">
              <label for="last_name">Prezime</label>
              <input type="text" id="last_name" placeholder="prezime" required
                      class="login_input user_input" v-model="clientInput.last_name">
            </div>
          </div>

          <div class="input__group">
            <div class="input__field">
              <label for="email">E-mail</label>
              <input type="email" id="email" placeholder="e-mail" required
                      class="login_input user_input" v-model="clientInput.email">
            </div>
    <!--         <div class="input__field">
              <label for="address">Adresa</label>
              <input type="text" name="address" placeholder="adresa"
                      class="login_input user_input" v-model="clientInput.address">
            </div>
            <div class="input__field">
              <label for="tel">Telefon</label>
              <input type="tel" name="tel" placeholder="telefon"
                      class="login_input user_input" v-model="clientInput.phone">
            </div> -->
            <div class="input__field">
              <label for="mobile">Mobilni</label>
              <input type="tel" id="mobile" placeholder="mobilni" required
                      class="login_input user_input" v-model="clientInput.mobile">
            </div>
          </div>

          <div class="input__group">
            <div class="input__field">
              <label for="instagram">Instagram</label>
              <input type="text" name="instagram" placeholder="instagram profil" id="instagram"
                      class="login_input user_input" v-model="clientInput.instagram">
            </div>
            <div class="input__field">
              <label for="facebook">Facebook</label>
              <input type="text" id="facebook" placeholder="facebook profil" 
                      class="login_input user_input" v-model="clientInput.facebook">
            </div>
          </div>
          
          <div class="input__group">
            <div class="input__field">
              <label for="notes">Napomene</label>
              <textarea name="notes" id="notes" cols="20" rows="5" placeholder="napomene"
                        class="login_input user_input" v-model="clientInput.notes">
              </textarea>
            </div>
            <div v-if="getOneClient._id" class="">
              <button type="submit" @click="newClient()" class="action_btn client__add">
                <svg version="1.1" id="Layer_1" x="0px" y="0px" fill="var(--purple)" width="40px" height="40px"
                      viewBox="0 0 1792.774 1649.856" enable-background="new 0 0 1792.774 1649.856" xml:space="preserve">
                  <path d="M454.553,31.721c1.809-3.51,5.275-6.244,9.237-6.794c2.745,1.26,4.231,4.027,5.932,6.352  c2.627-0.431,5.254-1.184,7.935-0.947c7.073,5.814,7.493,16.052,12.93,23.007c1.981-1.916,3.521-4.403,5.997-5.738  c1.497-0.129,2.993-0.022,4.5,0.043c4.866,8.602,7.859,18.044,12.058,26.948c2.573,7.267,7.849,13.382,9.054,21.166  c3.945,10.131,6.999,22.931,21.048,48.997c10.57,18.942,11.051,36.155,22.275,57.438C627.07,319.323,699.534,439.901,706.86,504.93  c-2.379,9.205-1.776,18.733-1.712,28.154c0.269,4.123,1.895,7.999,3.025,11.94c8.988,26.636,7.016,39.514,15.159,158.102  c0.641,60.776,2.943,24.21-6.707,96.649c-0.926,7.547-2.713,15.062-2.788,22.674c1.809,2.853,5.114,4.285,7.547,6.557  c4.694,3.531,7.795,9.237,13.662,11.078c24.473,8.939,46.72,31.978,52.184,35.066c36.078,20.281,43.331,22.369,54.51,29.478  c50.625,28.929,39.227,90.71,46.499,101.03c3.822,6.417,5.663,14.438,3.208,21.672c-2.638,4.845,0.98,9.507,1.658,14.33  c1.26,7.816,6.514,14.071,10.659,20.563c16.903,23.591,21.74,43.604,23.761,50.494c1.758,5.561,10.7,17.92,11.811,20.607  c2.433,5.652,4.317,11.627,7.827,16.763c1.604,2.498,2.39,5.415,3.984,7.935c6.266,5.254,8.99,14.05,16.849,17.549  c8.699,3.682,15.331,12.166,16.225,21.64c0.56,4.49,3.068,8.365,4.586,12.564c0.915,2.498,3.865,3.079,5.932,4.36  c2.875-3.51,6.557-6.535,8.075-10.949c1.55-4.199,5.512-6.643,8.129-10.088c5.803-8.096,12.134-15.837,19.024-23.029  c2.132-2.401,3.004-5.588,4.802-8.215c2.089-3.23,5.792-4.963,7.881-8.204c24.668-38.697,102.667-106.134,102.667-106.134  c1.152-2.627,3.133-4.748,5.523-6.309c4.392-2.817,13.842-16.72,19.336-21.597c3.564-2.821,3.295-8.538,7.655-10.573  c5.598-2.847,22.663-28.152,25.215-31.933c8.504-10.807,9.028-7.678,14.718-12.08c4.532-6.729,6.966-14.62,7.256-22.706  c-1.055-2.487-3.025-4.457-4.21-6.869c-0.344-2.778,0.958-5.62,3.155-7.3c3.94-3.262,6.675-7.698,10.54-11.046  c24.858-22.151,6.796-3.293,48.75-33.031c3.93-3.025,8.742-4.403,13.296-6.201c4.899-1.852,7.827-6.503,12.134-9.259  c14.74-11.124,16.585-6.514,44.206-31.254c6.04-7.935,15.536-12.693,20.542-21.511c1.54-3.316,5.609-3.639,8.053-5.932  c10.002-14.997,18.335-31.028,27.572-46.499c15.816-29.618,36.325-56.318,54.585-84.397  c95.567-154.578,56.87-138.825,119.785-267.929c17.815-32.42,18.507-46.906,28.326-60.969c21.489-30.322,7.306-6.945,34.893-50.181  c3.628-7.806,6.244-16.063,9.302-24.095c3.542-6.352,8.635-11.821,11.337-18.647c2.003-5.351,3.456-10.874,5.405-16.246  c2.487-6.546,2.336-13.867,5.706-20.111c1.701-4.027,4.532-7.386,6.847-11.057c0.452-5.146-0.786-10.486,0.797-15.514  c14.677-20.761,27.665,2.543,31.093,5.028c6.43,4.991,6.04,1.341,12.22,11.671c6.094-0.592,11.531,2.476,17.538,2.756  c4.63,4.242,6.815,11.38,5.512,17.527c-0.84,5.405-6.654,7.278-9.711,11.154c5.835-1.55,11.778-4.931,17.958-2.649  c5.071,1.572,5.222,7.935,4.963,12.306c-0.075,5.588-4.231,9.647-6.567,14.362c1.679,1.044,3.585,1.938,4.877,3.531  c2.998,5.013-0.453,18.674-3.962,23.858c-1.227,2.003-2.961,3.671-3.951,5.792c0.28,2.81,1.055,5.555,1.109,8.398  c0.477,8.434-9.11,42.825-17.043,54.143c-0.96,18.947-3.962,41.629-16.408,73.684c1.27,1.658,2.724,3.23,3.693,5.114  c0.711,3.058,0.054,6.384,1.507,9.302c1.699,3.628,10.508,34.62,2.885,57.632c-2.11,6.858-7.213,12.101-10.809,18.152  c-3.779,6.244-10.002,10.293-15.88,14.33c-4.931,3.607-11.488,2.821-16.634,5.943c-18.387,9.601-23.726,0.941-47.802,29.833  c-36.24,55.627-19.142,77.469-81.35,240.443c-35.465,94.276-38.013,109.851-71.499,153.57c-2.121,6.126-2.433,12.833-4.683,18.97  c-2.635,6.99-13.403,27.296-18.776,33.386c8.258,9.076,14.19,19.971,20.262,30.565c2.616,4.21,2.347,9.281,2.175,14.028  c0.409,2.767-1.658,4.791-4.263,5.125c-7.224-1.669-13.544-6.524-21.199-6.374c1.087,5.781-1.023,11.541-0.301,17.355  c4.526,25.855-8.199,44.383-42.613,45.724c-6.094,1.421-11.746-2.734-17.85-1.755c-7.3,0.065-14.879,1.163-21.877-1.475  c-5.824-0.635-11.66-1.841-17.517-1.066c-6.244-2.864-9.507-11.541-17.431-10.357c-1.916,4.726-0.818,9.873-1.69,14.782  c-3.426,21.012,0.222,5.634-23.137,42.537c-2.767,3.499-3.424,8.042-5.178,12.047c-21.281,50.055-6.478,9.474-26.334,59.828  c-37.592,96.855-48.586,106.806-58.396,125.664c-42.808,70.036-20.134,44.555-77.355,162.57c-3.37,6.977-8.914,12.758-11.477,20.144  c-0.797,1.507-0.56,4.241-0.947,4.134c-1.54,3.338-5.039,5.092-6.654,8.365c-1.486,2.756-3.703,4.996-6.051,7.041  c-3.919,3.176-4.726,8.624-8.484,11.94c-2.433,1.475-5.405,2.164-7.353,4.328c-3.316,4.673-9.647,4.726-14.265,7.472  c-22.79,13.898-68.173,23.996-69.173,24.289c-7.116,2.261-14.75,1.141-21.952,2.971c-11.387,2.797-47.057,1.62-58.935,1.163  c-2.907,0.302-5.695,1.647-8.645,1.324c-53.605-10.656-55.499-27.05-63.381-34.721c-6.686-7.44-14.685-13.802-20.079-22.318  c-0.689-0.054-9.388-5.372-11.552-8.764c-2.487-4.447-7.989-5.437-11.154-9.227c-1.475-3.811-2.121-7.849-3.015-11.8  c-7.694-11.615-11.07-7.987-15.159-13.974c-1.27-2.272-1.626-4.877-2.519-7.267c-0.99-3.316-4.231-5.276-5.329-8.527  c-1.184-2.336-1.055-5.222-2.498-7.364c-3.962-1.733-8.785-1.83-11.886-5.2c-3.844-3.036-2.509-8.365-3.65-12.5  c-2.132-2.498-5.275-4.124-6.74-7.16c-1.884-3.693-2.928-8.408-7.03-10.314c-3.876-2.24-9.302-0.172-12.403-3.876  c-1.41-2.864,1.421-6.74-1.701-8.904c-46.826-42.746-51.268-63.541-77-98.522c-2.433-3.101-6.707-3.94-9.097-7.041  c-1.066-2.476-0.377-5.502-2.089-7.687c-5.028-6.804-10.131-13.544-15.03-20.424c-1.862-2.885-6.438-3.23-7.084-6.923  c-0.926-5.986-6.115-9.636-9.227-14.448c-4.097-6.273-8.842-1.619-16.149-23.589c-4.037-4.005-6.804-9.044-10.712-13.124  c-9.668-7.816-10.615-21.672-18.992-30.415c-4.188-3.015-3.176-8.774-5.48-12.887c-2.95-5.609-6.611-10.842-9.098-16.688  c-1.669-3.445-2.196-7.429-4.597-10.497c-1.443-1.927-2.756-3.983-3.413-6.309c-2.498-9.155-18.168-27.232-23.643-39.889  c-9.737-18.65-15.3-41.617-19.756-44.863c-13.589-10.649-35.371-33.498-42.139-50.451c-2.853-6.675-2.788-13.996-3.66-21.059  c-2.451-23.69,3.977,3.892-8.042-36.347c-1.26-0.022-2.509-0.054-3.747-0.086c-3.908,5.211-7.02,10.96-10.906,16.182  c-2.487,3.262-6.126,5.48-8.344,8.957c-0.689,3.284,0.42,6.729-0.603,9.991c-1.184,4.123-1.281,8.43-1.701,12.683  c-1.378,2.918-5.997,1.324-7.343,4.274c-7.311,13.198-9.34,7.113-14.879,12.015c-5.921,4.349-7.418,12.586-14.276,15.966  c-1.044-2.089-2.089-4.156-3.122-6.234c-3.704-0.829-7.31-1.981-10.96-2.982c-1.83,2.121-3.628,4.274-5.674,6.201  c-1.077-2.67,0.721-5.2,0.851-7.838c-5.438-8.038-19.463-16.369-23.643-21.565c-11.357-13.973-23.455-37.261-25.096-42.624  c-2.064-9.038-21.212-53.916-22.426-58.514c-0.657-2.885-2.433-5.286-4.586-7.224c1.292-4.748-3.596-7.332-4.909-11.358  c-2.541-5.545-2.433-11.886-5.125-17.355c-1.572-3.004-0.764-6.309-0.56-9.474c-7.575-15.918,6.094-63.287,6.75-65.05  c4.511-11.132,4.651-23.33,7.332-34.936c11.761-49.708,36.354-69.826,40.093-74.707c1.421-1.669,0.366-3.984,0.754-5.932  c-0.022-4.07,3.962-6.072,6.783-8.204c-1.845-10.567-19.595-61.653-18.13-91.276c0.129-3.865,0.807-8.064-1.227-11.585  c-6.798-13.197-14.596-20.02-31.75-52.302c-18.795-32.492-63.739-119.56-68.323-127.634  c-15.929-29.196-74.107-109.122-79.412-121.96c-2.264-5.377-7.551-20.031-22.168-28.348c-5.911-3.316-10.842-8.139-16.989-11.057  c-21.594-12.619-8.167,1.819-57.599-49.04c-4.748-6.567-8.107-14.717-15.267-19.132c-5.437-3.079-10.54-6.772-15.127-11.014  c10.802-10.335,15.366-6.771,32.385-4.813c-9.151-16.375-21.705-30.91-28.089-48.76c-6.302-20.654-22.532-36.395-19.993-55.468  c3.294-3.434,8.645-3.714,12.457-6.535c3.155,1.54,6.406,3.23,8.473,6.18c9.045,10.881,28.517,57.699,40.912,65.05  c-1.034-5.469-4.317-10.045-7.267-14.621c-27.833-64.559-21.311-32.392-33.3-74.19c3.187-2.993,7.902-3.025,11.294-5.706  c2.196-1.723,4.92,0.258,7.095,1.098c3.973,1.68,5.362,6.212,8.635,8.71c3.919,0.56,7.02-2.175,10.411-3.542  c11.909,1.712,21.877,24.282,30.372,34.721c17.023,21.314,17.807,25.848,24.913,31.922c-0.93-10.525-20.495-28.141-20.187-44.497  c3.531-0.42,7.612-0.054,10.206-2.961c20.669,7.759,45,65.612,55.618,75.299c9.253,8.948,18.326,19.067,29.639,40.352  c11.746,22.055,23.324,58.757,24.052,62.003c0.915,3.973-0.065,8.15,1.001,12.08c4.407,12.108,170.424,229.1,181.304,232.174  c1.97-1.27,3.542-3.058,5.545-4.263c3.079,1.497,6.783,1.68,9.883,0.205c3.187-3.122,7.429-5.695,8.742-10.217  c-2.487,0.56-4.92,1.281-7.386,1.863c12.635-7.772,18.433-4.557,23.89-4.5c3.37-0.7,6.567-2.412,8.193-5.588  c3.908,3.564,8.505-0.398,12.952,0.398c3.682,0.495,7.321-1.184,11.003-0.323c6.966,1.313,14.082,0.506,21.07-0.215  c9.291-0.431,18.582-0.075,27.885-0.226c15.038-0.236,31.884,12.471,37.843,24.493c2.078,3.661,2.788,7.87,4.64,11.628  c3.165,4.651,7.698,8.225,10.615,13.081c16.614,27.674,18.144,29.116,22.297,30.824c0-15.536-24.93-53.154-35.722-90.641  c-10.583-35.905-12.919-73.813-25.484-109.202c-26.04-76.772-32.533-77.104-52.55-110.935c-8.27-12.823-21.499-13.904-27.292-19.099  c-5.254-4.446-10.056-9.453-15.869-13.21c-4.597-3.23-10.142-5.448-13.404-10.239c-24.592-37.764-9.675-9.788-30.102-39.835  c-2.81-4.371-7.224-7.3-10.54-11.24c7.049-12.089,26.651-4.078,36.078,8.365c0.819,1.001,11.361,13.256,15.363,13.748  c0.129-5.706,1.012-11.531-0.366-17.151c-2.281-11.898,1.617-8.338-4.737-31.459c-1.357-4.823-0.366-9.937-1.647-14.761  c-0.609-2.367-6.984-29.296-4.608-44.206c0.678-3.779,4.199-5.943,5.965-9.13C455.026,42.132,452.583,36.814,454.553,31.721   M399.559,736.652c4.313,20.311,8.026,23.502,20.434,40.696c3.434,4.77,9.916,6.643,12.413,12.198  c1.809,5.928,15.107,19.994,18.626,21.597c-0.506-3.73-8.096-31.857-13.91-37.047c-10.484-11.613-26.015-45.65-31.157-43.905  C403.327,731.775,401.529,734.359,399.559,736.652z"/>
                  <path stroke="#000000" stroke-width="0.0938" d="M903.969,1037.065C904.529,1037.625,904.529,1037.625,903.969,1037.065z"/>
                </svg>
                <p>Aktivnosti</p> 
              </button>
            </div>
          </div>

          <div class="input__btns">
            <div class="action_btns">
              <button type="submit" class="action_btn">
                <svg version="1.1" id="Layer_1" x="0px" y="0px" height="40px"
                      viewBox="0 0 408.759 408.759" style="enable-background:new 0 0 408.759 408.759;" xml:space="preserve">
                  <g>
                    <path style="fill:#8bdd6b;" d="M204.383,408.759c-58.121,0-113.674-24.867-152.417-68.225
                      C18.46,303.057,0.005,254.703,0.005,204.381C0.005,91.685,91.688,0,204.383,0c50.319,0,98.674,18.455,136.164,51.964
                      c43.346,38.762,68.207,94.316,68.207,152.417C408.755,317.076,317.074,408.759,204.383,408.759"/>
                    <path style="fill:#35af05;" d="M377.755,204.379c0,18.08-2.77,35.52-7.909,51.901c-15.6,49.779-53.02,89.899-101.069,109.11
                      c-4.69,1.889-9.481,3.56-14.361,5.03c-10.5,3.16-21.419,5.35-32.65,6.47c-5.719,0.58-11.51,0.87-17.38,0.87
                      c-51.39,0-97.559-22.361-129.299-57.881c-0.26-0.29-0.521-0.591-0.79-0.881c-26.95-30.56-43.29-70.68-43.29-114.62
                      c0-95.749,77.621-173.38,173.379-173.38c43.951,0,84.071,16.35,114.631,43.29c0.29,0.27,0.589,0.53,0.879,0.79
                      c33.66,30.1,55.491,73.13,57.67,121.299v0.011C377.696,199.04,377.755,201.699,377.755,204.379"/>
                    <path style="fill:#1c6300;" d="M74.34,319.046c3.509,3.976,7.2,7.791,11.056,11.43c-3.585-3.385-7.023-6.919-10.309-10.596
                      C74.84,319.605,74.594,319.321,74.34,319.046 M59.6,299.796c0.005,0.008,0.011,0.016,0.016,0.024
                      C59.611,299.813,59.604,299.802,59.6,299.796 M59.097,299.029c0.017,0.025,0.031,0.048,0.048,0.073
                      C59.128,299.078,59.113,299.054,59.097,299.029 M58.793,298.562c0.021,0.033,0.041,0.063,0.062,0.096
                      C58.834,298.626,58.813,298.593,58.793,298.562 M58.495,298.102c0.056,0.086,0.108,0.168,0.164,0.254
                      C58.605,298.272,58.549,298.186,58.495,298.102 M58.272,297.754c0.036,0.056,0.075,0.117,0.111,0.173
                      C58.346,297.869,58.31,297.813,58.272,297.754 M57.99,297.312c0.044,0.069,0.089,0.14,0.133,0.208
                      C58.078,297.451,58.034,297.381,57.99,297.312 M57.71,296.87c0.061,0.097,0.124,0.197,0.186,0.293
                      C57.834,297.067,57.771,296.967,57.71,296.87 M57.474,296.496c0.051,0.082,0.102,0.162,0.153,0.244
                      C57.576,296.659,57.524,296.576,57.474,296.496 M57.209,296.074c0.061,0.097,0.123,0.197,0.184,0.295
                      C57.333,296.271,57.27,296.171,57.209,296.074 M56.936,295.635c0.067,0.108,0.133,0.214,0.2,0.322
                      C57.069,295.849,57.003,295.743,56.936,295.635 M56.696,295.246c0.062,0.1,0.12,0.195,0.182,0.295
                      C56.817,295.443,56.756,295.344,56.696,295.246 M56.439,294.829c0.071,0.116,0.142,0.231,0.213,0.347
                      C56.582,295.061,56.51,294.944,56.439,294.829 M56.173,294.392c0.072,0.119,0.144,0.237,0.217,0.355
                      C56.318,294.63,56.244,294.51,56.173,294.392 M55.922,293.98c0.073,0.121,0.146,0.242,0.22,0.363
                      C56.069,294.221,55.996,294.102,55.922,293.98 M55.681,293.58c0.076,0.127,0.153,0.254,0.229,0.38
                      C55.834,293.834,55.757,293.706,55.681,293.58 M55.419,293.143c0.077,0.13,0.154,0.258,0.232,0.387
                      C55.574,293.402,55.496,293.272,55.419,293.143 M54.935,292.328c0.161,0.273,0.321,0.542,0.484,0.815
                      C55.257,292.872,55.096,292.599,54.935,292.328 M152.31,38.956C81.994,61.064,31.004,126.76,31.004,204.37
                      c0,32.099,8.717,62.156,23.919,87.936c-15.2-25.78-23.917-55.835-23.917-87.927C31.006,126.769,81.994,61.067,152.31,38.956"/>
                    <path style="fill:#35af05;" d="M204.383,31.001c-18.142,0-35.638,2.787-52.073,7.955C81.994,61.067,31.006,126.769,31.006,204.379
                      c0,32.092,8.717,62.147,23.917,87.927c0.003,0.005,0.01,0.016,0.013,0.022c0.16,0.271,0.322,0.544,0.484,0.815v0.001
                      c0.077,0.129,0.155,0.259,0.232,0.387c0.009,0.016,0.02,0.034,0.03,0.05c0.076,0.126,0.153,0.254,0.229,0.38
                      c0.005,0.008,0.007,0.012,0.012,0.02c0.074,0.122,0.146,0.241,0.22,0.363c0.009,0.016,0.021,0.034,0.03,0.049
                      c0.071,0.117,0.145,0.238,0.217,0.355c0.016,0.026,0.034,0.056,0.05,0.082c0.071,0.115,0.142,0.232,0.213,0.347
                      c0.014,0.023,0.029,0.047,0.043,0.07c0.06,0.098,0.122,0.197,0.182,0.295c0.019,0.031,0.039,0.063,0.058,0.094
                      c0.067,0.108,0.133,0.214,0.2,0.322c0.024,0.038,0.049,0.079,0.073,0.117c0.061,0.097,0.123,0.197,0.184,0.295
                      c0.027,0.043,0.053,0.084,0.08,0.127c0.051,0.08,0.103,0.163,0.153,0.244c0.027,0.043,0.055,0.088,0.083,0.131
                      c0.061,0.097,0.124,0.197,0.186,0.293c0.032,0.051,0.062,0.097,0.094,0.148c0.044,0.069,0.088,0.139,0.133,0.208
                      c0.05,0.079,0.099,0.156,0.15,0.234c0.038,0.059,0.073,0.114,0.111,0.173c0.037,0.058,0.074,0.116,0.112,0.174
                      c0.054,0.084,0.109,0.17,0.164,0.254c0.044,0.068,0.089,0.138,0.134,0.206c0.02,0.031,0.042,0.065,0.062,0.096
                      c0.079,0.121,0.163,0.25,0.242,0.371c0.016,0.025,0.032,0.048,0.048,0.073c0.152,0.232,0.302,0.462,0.455,0.693
                      c0.004,0.006,0.012,0.018,0.016,0.024c4.462,6.754,9.386,13.178,14.724,19.226c0.254,0.275,0.5,0.559,0.747,0.834
                      c3.286,3.677,6.724,7.212,10.309,10.596c2.298,2.169,4.654,4.273,7.068,6.315c-25.53-30.2-40.919-69.241-40.919-111.881
                      c0-95.749,77.619-173.368,173.379-173.368c42.631,0,81.68,15.39,111.87,40.919C305.004,54.871,257.483,31.001,204.383,31.001"/>
                    <path style="fill:#35af05;" d="M317.613,136.427L178.714,275.326l90.064,90.064c48.049-19.21,85.469-59.33,101.069-109.11
                      c5.139-16.381,7.909-33.821,7.909-51.901c0-2.679-0.059-5.339-0.19-7.989v-0.011l0,0l-50.069-50.069"/>
                    <polyline style="fill:#FFFFFF;" points="188.597,285.205 102.651,199.26 118.207,183.704 188.597,254.094 311.936,130.754 
                      327.492,146.31 188.597,285.205 	"/>
                  </g>
                </svg>
                <p>Sačuvaj</p> 
              </button>
              <button type="submit" @click.prevent="formTypeChange('clients')"
                      class="action_btn cancel__btn">
                <svg version="1.1" id="Layer_1" x="0px" y="0px" height="40px"
                      viewBox="0 0 408.759 408.759" style="enable-background:new 0 0 408.759 408.759;" xml:space="preserve">
                  <g>
                    <path style="fill:#e7c75b;" d="M204.385,408.759c-58.121,0-113.675-24.868-152.418-68.227
                      C18.46,303.057,0.005,254.703,0.005,204.379C0.005,91.683,91.689,0,204.385,0c50.317,0,98.674,18.453,136.163,51.964
                      c43.348,38.761,68.207,94.315,68.207,152.415C408.755,317.074,317.075,408.759,204.385,408.759"/>
                    <path style="fill:#ffb515;" d="M377.759,204.379c0,9.08-0.7,17.999-2.05,26.7c-1.331,8.62-3.3,17.039-5.861,25.199
                      c-19.48,62.179-73.03,109.291-138.779,119.43c-3.08,0.48-6.181,0.87-9.3,1.18c-5.721,0.58-11.51,0.87-17.38,0.87
                      c-51.39,0-97.561-22.361-129.301-57.881c-0.26-0.29-0.519-0.589-0.79-0.879c-26.95-30.56-43.289-70.681-43.289-114.62
                      c0-95.751,77.619-173.381,173.38-173.381c43.95,0,84.069,16.35,114.629,43.29c0.29,0.27,0.591,0.53,0.881,0.79
                      C355.409,106.838,377.759,152.989,377.759,204.379"/>
                    <path style="fill:#e29403;" d="M74.342,319.046c3.837,4.347,7.885,8.496,12.136,12.439c-3.973-3.689-7.776-7.564-11.389-11.607
                      C74.842,319.603,74.597,319.321,74.342,319.046 M65.406,308.053c0.011,0.014,0.021,0.027,0.031,0.042
                      C65.427,308.081,65.417,308.067,65.406,308.053 M65.054,307.58c0.032,0.044,0.066,0.089,0.099,0.133
                      C65.12,307.669,65.087,307.624,65.054,307.58 M64.725,307.135c0.068,0.092,0.139,0.188,0.207,0.28
                      C64.864,307.323,64.793,307.228,64.725,307.135 M64.441,306.749c0.073,0.1,0.142,0.193,0.215,0.293
                      C64.584,306.943,64.513,306.847,64.441,306.749 M64.143,306.34c0.09,0.124,0.176,0.241,0.267,0.365
                      C64.321,306.585,64.231,306.461,64.143,306.34 M163.56,35.832C87.503,54.187,31.004,122.679,31.004,204.37
                      c0,38.107,12.288,73.34,33.125,101.952c-20.836-28.615-33.12-63.843-33.12-101.943C31.009,122.689,87.503,54.189,163.56,35.832"/>
                    <path style="fill:#ffb515;" d="M204.383,30.999c-14.062,0-27.731,1.673-40.823,4.833C87.503,54.189,31.009,122.689,31.009,204.379
                      c0,38.1,12.284,73.328,33.12,101.943c0.004,0.005,0.01,0.014,0.014,0.019c0.088,0.121,0.178,0.245,0.267,0.365
                      c0.009,0.012,0.023,0.031,0.032,0.043c0.072,0.099,0.143,0.194,0.215,0.293c0.023,0.031,0.046,0.063,0.069,0.094
                      c0.068,0.092,0.139,0.188,0.207,0.28c0.041,0.056,0.081,0.109,0.122,0.165c0.033,0.044,0.066,0.089,0.099,0.133
                      c0.084,0.114,0.169,0.227,0.254,0.341c0.01,0.014,0.021,0.028,0.031,0.042c2.82,3.771,5.792,7.425,8.904,10.951
                      c0.255,0.275,0.5,0.558,0.747,0.832c3.613,4.043,7.416,7.919,11.389,11.607c1.953,1.812,3.952,3.583,5.988,5.304
                      c-25.531-30.2-40.921-69.239-40.921-111.88c0-95.751,77.621-173.37,173.381-173.37c42.629,0,81.68,15.39,111.869,40.919
                      C305.004,54.869,257.484,30.999,204.383,30.999"/>
                    <path style="fill:#ffb515;" d="M276.012,131.382L131.383,276.013l99.686,99.695c65.749-10.14,119.299-57.251,138.779-119.43
                      c2.561-8.16,4.53-16.579,5.861-25.199l-91.242-91.242"/>
                    <polygon style="fill:#FFFFFF;" points="284.473,139.843 268.917,124.286 204.379,188.823 139.842,124.286 124.286,139.843 
                      188.823,204.379 124.286,268.916 139.842,284.472 204.379,219.936 268.917,284.472 284.473,268.916 219.936,204.379 	"/>
                  </g>
                </svg>
                <p>Odustani</p>
              </button>
            </div>
          </div>
        </form>
      </div>
    </transition>
  </div>
  
</template>

<script>
  import moment from 'moment';
  import { mapGetters, mapActions } from 'vuex';

  export default {
    name: 'Client',

    data() {
      return {
        enterClient: false,
        clientInput: {
          //_id: '',
          first_name: '',
          last_name: '',
          email: '',
          phone: '',
          mobile: '',
          address: '',
          date_started: '',
          notes: '',
          picture: '',
          active: ''
        },
        appeared: false,
        notificationSystem: {
        options: {
          show: {
            theme: "dark",
            icon: "icon-person",
            position: "topCenter",
            progressBarColor: "rgb(0, 255, 184)",
         /*    buttons: [
              [
                "<button>Ok</button>",
                function(instance, toast) {
                  alert("Hello world!");
                },
                true
              ],
              [
                "<button>Close</button>",
                function(instance, toast) {
                  instance.hide(
                    {
                      transitionOut: "fadeOutUp",
                      onClosing: function(instance, toast, closedBy) {
                        console.info("closedBy: " + closedBy);
                      }
                    },
                    toast,
                    "buttonName"
                  );
                }
              ]
            ],
            onOpening: function(instance, toast) {
              console.info("callback abriu!");
            },
            onClosing: function(instance, toast, closedBy) {
              console.info("closedBy: " + closedBy);
            } */
          },
          ballon: {
            balloon: true,
            position: "bottomCenter"
          },
          info: {
            position: "bottomLeft"
          },
          success: {
            position: "center"
          },
          warning: {
            position: "center"
          },
          error: {
            position: "center"
          },
          question: {
            timeout: 20000,
            close: false,
            overlay: true,
            toastOnce: true,
            id: "question",
            zindex: 999,
            position: "center",
            buttons: [
              [
                "<button><b>YES</b></button>",
                function(instance, toast) {
                  instance.hide({ transitionOut: "fadeOut" }, toast, "button");
                },
                true
              ],
              [
                "<button>NO</button>",
                function(instance, toast) {
                  instance.hide({ transitionOut: "fadeOut" }, toast, "button");
                }
              ]
            ],
            onClosing: function(instance, toast, closedBy) {
              console.info("Closing | closedBy: " + closedBy);
            },
            onClosed: function(instance, toast, closedBy) {
              console.info("Closed | closedBy: " + closedBy);
            }
          }
        }
      }
      }
    },

    filters: {
      formatDate: function(value) {
        if (value) {
          return moment(String(value)).format('YYYY-MM-DD')
        }
      }
    },

    computed: {
      ...mapGetters([ 'getAllClients', 
                      'getOneClient',
                      'getErrors',
                      'loadingState' ]),
    },

    methods: {
      ...mapActions([ 'clientAdd', 
                      'clientUpdate', 
                      'clientDelete',
                      'formTypeChange',
                      'clearErrors',
                      'setLoadingState' ]),
      
      async addClient() {
        this.setLoadingState(true);
        if (this.getOneClient._id) {
          await this.clientUpdate(this.clientInput);
        } else {
          await this.clientAdd(this.clientInput);
        }
        this.setLoadingState(false);
        if (this.getErrors.length) {
          this.$toast.error('Greška! ' + this.getErrors, 'OK', this.notificationSystem.options.error);
          this.clearErrors();
        } else {
          this.$toast.success('Uspješno sačuvano!', 'OK', this.notificationSystem.options.success);
          this.formTypeChange('clients');
        }
      },

      makeCorrectDate(str) {
        return new Date(str).toISOString().split('T')[0]
      },

      async newClient() {
        this.setLoadingState(true);
        this.formTypeChange('clientactivity');
        //await this.clientClear();
      },
      
      onAppeared() {
        this.appeared = true;
      }
    },

    mounted() {
      if (this.getOneClient) {
        this.clientInput = this.getOneClient
      } 
      this.setLoadingState(false);
    },

  }
</script>

<style>
  .user__form {
    display: grid;
    justify-content: center;
    justify-items: baseline;
    margin: 1em;
    padding: 1em;
    border: 2px solid var(--purple);
    border-radius: 1em;
  }

  .action_btns  {
    display: flex;
  }

  .action_btn {
    display: grid;
    grid-template-columns: auto auto;
    grid-column-gap: 1em;
    align-items: center;
    background: white;
    margin-right: 1em;
    margin-top: 1em;
    cursor: pointer;
    color: var(--green);
    font-size: 1.2em;
    font-weight: 800;
    border: 2px solid transparent;
    border-bottom: 2px solid var(--green);
    transition: ease .8s all;
  }

  .action_btn:hover {
    color: var(--green-dark);
    border-bottom: 2px solid var(--green-dark);
    transform: scale(1.05);
  }

  .cancel__btn {
    color: var(--orange);
    border-bottom: 2px solid var(--orange);
  }

  .cancel__btn:hover {
    color: var(--orange-dark);
    border-bottom: 2px solid var(--orange-dark);
  }

  .user_input {
    font-size: 1.3em;
    padding: 0.3em;
  }

  .check_active {
    cursor: pointer;
  }

  .input__field {
    display: grid;
    justify-items: left;
    align-content: baseline;
  }

  .input__group {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-column-gap: 1em;
    justify-self: normal;
  }

  .input__btns {
    justify-self: center;
  }
</style>