(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["attendance"],{"0430":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loadingState?n("loading",{key:"1",attrs:{pic:"loading"}}):n("div",{key:"2",staticClass:"lists__wrapper"},[n("form",{staticClass:"user__form",attrs:{method:"post"},on:{submit:function(t){return t.preventDefault(),e.addAttendance()}}},[e.getOneAttendance._id?e._e():n("h3",{staticClass:"new_item item__header"},[n("svg",{attrs:{version:"1.1",x:"0px",y:"0px",fill:"var(--gold)",width:"30px",height:"30px",viewBox:"0 0 1000 1000","enable-background":"new 0 0 30 30","xml:space":"preserve"}},[n("path",{attrs:{d:"M411.3,882.2c-2.8,0.2-4.7,0.5-6.6,0.5c-52.6,0.5-105.1-2.5-157.5-7.5c-38.2-3.7-76.3-7.4-114.2-12.5c-26-3.4-51.7-9.1-77.5-13.9c-11.8-2.2-17.8-10-21-21.2c-7-24.7-8.3-50-6.2-75.4c1.2-15.1,2.8-30.1,5-45.1c3.9-27,20.5-45.2,42.8-59.1c19.2-11.9,41-16.9,62.2-23.5c22.4-7,45.1-13.4,67-21.9c22.4-8.8,42.4-22,57.1-41.9c7.8-10.6,11.8-22.5,11.3-35.8c-0.3-9.4-0.9-18.9-1.9-28.4c-1.2-11.4-6.7-20.7-15.1-28.4c-5.6-5.1-11.1-10.6-17.3-15.1c-13.2-9.6-21.9-22.4-27.7-37.2c-4.2-10.5-7.5-21.3-11.6-31.9c-0.8-2.1-2.6-4.7-4.5-5.5c-11.1-4.5-19-12.7-24.3-22.7c-14.6-28-16.1-55.7,4.5-82.1c1.3-1.7,1.5-4.3,1.7-6.6c1.9-24.7,2.5-49.6,5.8-74.2c3.9-28.7,10.4-57.1,24.4-83c28.3-52.2,71.8-84.4,130-95.2C400.6,3,460.2,13.2,515.7,45.3c31.9,18.4,53.4,45.6,66.9,79.1c13.7,33.9,21,69.4,23.2,105.9c0.7,12.9,1.2,25.9,1.9,38.8c0.1,1.7,0.6,3.9,1.7,4.9c11.5,10.8,15.4,24.6,14.9,39.7c-0.6,16.3-2.6,32.4-12.4,46.4c-5.6,8-12.7,14-21.6,18c-2.1,1-4.3,3.3-5.1,5.5c-3.7,9.6-6.7,19.4-10.3,28.9c-0.8,2.1-2.9,4.3-5,5.1c-43.1,17.9-80.5,44.2-112.7,77.9c-45.6,47.7-75,103.8-85.9,169.1c-12.3,73.9,0.4,143.8,36,209.5C408.6,876.6,409.7,879,411.3,882.2z"}}),n("path",{attrs:{d:"M695.8,437.1c-152.6,0-276.6,123.8-276.7,276.3C419,866.1,543.2,990.1,696.2,990c152.2-0.1,276.2-123.9,276.4-276.1C972.9,561.2,848.7,437.2,695.8,437.1z M878.3,634.1l-219,221.8c0.2-0.3,0.5-0.6,0.7-0.9c-7.2,7.8-13-0.6-12.7-0.3L503,711.4c-4.7-4.7-4.7-12.4,0-17.2l34.5-35.1c4.7-4.7,12.4-4.7,17.2,0l100,100l172.5-175.9c4.7-4.7,12.3-4.7,16.9,0l33.9,33.9c4.7,4.7,4.7,12.3,0,16.9H878.3z"}})]),e._v(" NOVA PRISUSTVA ")]),n("div",{staticClass:"input__group att__header"},[n("div",{staticClass:"input__field att_date"},[n("label",{attrs:{for:"datePicker"}},[e._v("Datum "),e.getOneAttendance._id?e._e():n("tooltip",{attrs:{tip:"Kad izabereš datum izlistaju se sve grupe koje se održavaju tog dana."}})],1),n("datepicker",{staticClass:"login_input user_input",attrs:{placeholder:"datum upisa",language:e.sr},on:{input:function(t){return e.selectDate()}},model:{value:e.attendanceInput.attend_date,callback:function(t){e.$set(e.attendanceInput,"attend_date",t)},expression:"attendanceInput.attend_date"}}),n("h3",{staticClass:"weekday__att"},[e._v(" "+e._s(e._f("formatDay")(e.attendanceInput.attend_date))+" ")])],1),n("div",{staticClass:"att_totals totals__att"},[n("h4",[e._v("Ukupno: "+e._s(e.filteredClients.length))]),n("h4",[e._v("Prisustvovalo: "+e._s(e.presentClients()))])])]),!e.attendanceInput._id||e.existingMembers.length?n("ul",{staticClass:"schedule__groups"},[n("h3",{staticClass:"att_schedule"},[e._v("Grupe/Termini :")]),n("div",{},e._l(e.schedules,(function(t){return n("li",{key:t,class:e.selectedSchedules.includes(t)?"schedule__selected":"",on:{click:function(n){return e.checkSchedule(t)}}},[e._v(" "+e._s(t)+" ")])})),0)]):e._e(),n("div",{staticClass:"members__list"},[n("div",{staticClass:"members__items"},[n("search-bar",{attrs:{searchStr:e.search,pageSizeNr:e.pageSize},on:{changed:e.setPageSize,typed:e.searchItems}}),n("div",{},[n("div",{staticClass:"akcije"},[n("tooltip",{attrs:{tip:"Dodavanje vježbačica koje nisu u listi, kao i brisanje postojećih iz liste"}}),n("button",{staticClass:"btn__auto btn__auto_toggle",on:{click:function(t){return t.preventDefault(),e.toggleActions()}}},[e._v(" "+e._s(e.btn_title)+" ")]),n("transition",{attrs:{name:"list",mode:"out-in"}},[e.actions?n("form",{staticClass:"form__auto",on:{submit:e.handleFormSubmit}},[n("autocomplete",{ref:"autocomplete",attrs:{search:e.searchClientsAdd,"get-result-value":e.getResultValue,placeholder:"traži (ime) vježbačicu koja nije u listi"},on:{submit:e.handleSubmit}}),n("button",{staticClass:"btn__auto btn__auto_submit",attrs:{type:"submit"}},[n("svg",{staticStyle:{fill:"var(--purple)"},attrs:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",height:"20px",viewBox:"0 0 300.003 300.003"}},[n("path",{attrs:{d:"M150,0C67.159,0,0.001,67.159,0.001,150c0,82.838,67.157,150.003,149.997,150.003S300.002,232.838,300.002,150\n                          C300.002,67.159,232.839,0,150,0z M213.281,166.501h-48.27v50.469c-0.003,8.463-6.863,15.323-15.328,15.323\n                          c-8.468,0-15.328-6.86-15.328-15.328v-50.464H87.37c-8.466-0.003-15.323-6.863-15.328-15.328c0-8.463,6.863-15.326,15.328-15.328\n                          l46.984,0.003V91.057c0-8.466,6.863-15.328,15.326-15.328c8.468,0,15.331,6.863,15.328,15.328l0.003,44.787l48.265,0.005\n                          c8.466-0.005,15.331,6.86,15.328,15.328C228.607,159.643,221.742,166.501,213.281,166.501z"}})])])],1):e._e()])],1),n("div",{staticClass:"days__list"},[n("span",{staticClass:"sortable",on:{click:function(t){return e.sortItems("last_name",!0)}}},[e._v(" Vježbačica "),n("svg",{class:e.sortOrder?"sort__asc":"sort__desc",staticStyle:{"enable-background":"new 0 0 512 512"},attrs:{fill:"var(--gold-light)",height:"20px",width:"20px",viewBox:"0 0 512 512","xml:space":"preserve"}},[n("path",{attrs:{d:"M497.552,318.828L284.686,128.883c-16.353-14.591-41.019-14.592-57.372,0.001L14.448,318.829\n                  C0.994,330.833-3.548,349.477,2.876,366.326c6.425,16.848,22.227,27.735,40.258,27.735h425.731\n                  c18.031,0,33.833-10.886,40.258-27.736C515.547,349.477,511.004,330.833,497.552,318.828z M490.062,359.057\n                  c-2.692,7.059-9.674,14.603-21.196,14.603H43.133c-11.523,0-18.504-7.543-21.196-14.603c-2.691-7.059-2.505-17.338,6.093-25.009\n                  l212.866-189.944c4.305-3.842,9.704-5.763,15.104-5.763c5.399,0,10.8,1.922,15.103,5.762l212.866,189.945\n                  C492.567,341.721,492.754,351.998,490.062,359.057z"}})])]),n("span",{staticClass:"sortable",on:{click:function(t){return e.sortItems("present",!1)}}},[e._v(" Prisutna "),n("svg",{class:e.sortOrder?"sort__asc":"sort__desc",staticStyle:{"enable-background":"new 0 0 512 512"},attrs:{fill:"var(--gold-light)",height:"20px",width:"20px",viewBox:"0 0 512 512","xml:space":"preserve"}},[n("path",{attrs:{d:"M497.552,318.828L284.686,128.883c-16.353-14.591-41.019-14.592-57.372,0.001L14.448,318.829\n                  C0.994,330.833-3.548,349.477,2.876,366.326c6.425,16.848,22.227,27.735,40.258,27.735h425.731\n                  c18.031,0,33.833-10.886,40.258-27.736C515.547,349.477,511.004,330.833,497.552,318.828z M490.062,359.057\n                  c-2.692,7.059-9.674,14.603-21.196,14.603H43.133c-11.523,0-18.504-7.543-21.196-14.603c-2.691-7.059-2.505-17.338,6.093-25.009\n                  l212.866-189.944c4.305-3.842,9.704-5.763,15.104-5.763c5.399,0,10.8,1.922,15.103,5.762l212.866,189.945\n                  C492.567,341.721,492.754,351.998,490.062,359.057z"}})])]),n("span",[e._v("Napomena")]),n("span",{staticClass:"sortable",on:{click:function(t){return e.sortItems("group",!1)}}},[e._v(" Grupa/Termin "),n("svg",{class:e.sortOrder?"sort__asc":"sort__desc",staticStyle:{"enable-background":"new 0 0 512 512"},attrs:{fill:"var(--gold-light)",height:"20px",width:"20px",viewBox:"0 0 512 512","xml:space":"preserve"}},[n("path",{attrs:{d:"M497.552,318.828L284.686,128.883c-16.353-14.591-41.019-14.592-57.372,0.001L14.448,318.829\n                  C0.994,330.833-3.548,349.477,2.876,366.326c6.425,16.848,22.227,27.735,40.258,27.735h425.731\n                  c18.031,0,33.833-10.886,40.258-27.736C515.547,349.477,511.004,330.833,497.552,318.828z M490.062,359.057\n                  c-2.692,7.059-9.674,14.603-21.196,14.603H43.133c-11.523,0-18.504-7.543-21.196-14.603c-2.691-7.059-2.505-17.338,6.093-25.009\n                  l212.866-189.944c4.305-3.842,9.704-5.763,15.104-5.763c5.399,0,10.8,1.922,15.103,5.762l212.866,189.945\n                  C492.567,341.721,492.754,351.998,490.062,359.057z"}})])])]),e.loadingMembers?n("loading",{attrs:{pic:"loading"}}):n("transition-group",{attrs:{name:"slide-fade",mode:"out-in"}},e._l(e.pageOfItems,(function(t){return n("div",{key:t._id,staticClass:"members_input att_members members__att",attrs:{name:"member"}},[n("div",{staticClass:"att_member"},[e._v(" "+e._s(e.attendanceInput.members.map((function(e){return e.client._id})).indexOf(t.client._id)+1)+" "+e._s(t.client.last_name)+", "+e._s(t.client.first_name)+" ")]),n("CheckboxCustom",{class:"user_input payment__price check",attrs:{modelValue:t.present,checkId:t._id},model:{value:t.present,callback:function(n){e.$set(t,"present",n)},expression:"member.present"}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.note,expression:"member.note"}],staticClass:"login_input user_input payment__note",attrs:{type:"text"},domProps:{value:t.note},on:{input:function(n){n.target.composing||e.$set(t,"note",n.target.value)}}}),n("p",[e._v(e._s(e.setClientSchedule(t.client._id)))]),e.actions?n("svg",{staticClass:"btn_minus",staticStyle:{fill:"var(--purple)"},attrs:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",height:"20px",viewBox:"0 0 300.003 300.003","xml:space":"preserve"},on:{click:function(n){return e.removeClient(t)}}},[n("path",{attrs:{d:"M150.001,0c-82.843,0-150,67.159-150,150c0,82.838,67.157,150.003,150,150.003c82.838,0,150-67.165,150-150.003\n                        C300.001,67.159,232.838,0,150.001,0z M197.218,166.283H92.41c-8.416,0-15.238-6.821-15.238-15.238s6.821-15.238,15.238-15.238\n                        H197.22c8.416,0,15.238,6.821,15.238,15.238S205.634,166.283,197.218,166.283z"}})]):e._e()],1)})),0)],1)],1)]),n("jw-pagination",{staticClass:"pagine",attrs:{items:e.filteredClients,initialPage:e.initialPage,pageSize:e.pageSize,labels:e.customLabels,styles:e.customStyles},on:{changePage:e.onChangePage}}),n("div",{staticClass:"modify_btns"},[n("action-buttons",{attrs:{toForm:"attendances"}}),n("delete-button",{on:{clicked:function(t){return e.delClient()}}})],1)],1)])},s=[],r=(n("99af"),n("4de4"),n("7db0"),n("c740"),n("caad"),n("c975"),n("d81d"),n("45fc"),n("a434"),n("2532"),n("2ca0"),n("2909")),i=(n("96cf"),n("1da1")),c=n("5530"),l=n("2f62"),u=n("d149"),o=n("7d33"),d=n("8351"),m=n("88d8"),p=n("d41d"),h=n("05fc"),f=n("bdb2"),g=n("ab63"),_=n("7146"),b=n("c7e8"),v=n("87fd"),C=n("a3d3"),x=n("fa33"),w=n("2430"),S=n("95bf"),k=n("5a0c"),A=n.n(k),I=n("f1e9"),O=n.n(I);A.a.locale(O.a);var j={name:"Attendance",components:{Loading:o["a"],Datepicker:x["a"],SearchBar:d["a"],ActionButtons:m["a"],DeleteButton:p["a"],Tooltip:h["a"],Autocomplete:S["a"],CheckboxCustom:f["a"]},mixins:[g["a"],_["a"],b["a"],v["a"],C["a"]],data:function(){return{sr:w["sr"],customLabels:u["a"],customStyles:u["b"],attendanceInput:{attend_date:new Date,notes:"",members:[]},notClients:[],actions:!1,input:"",foundClient:{_id:"",note:"",present:!0},schedules:[],selectedSchedules:[],attendanceExist:!1,attendanceMembers:[],existingMembers:[],sortOrder:!0,loadingMembers:!1,btn_title:"dodatne opcije"}},computed:Object(c["a"])({},Object(l["c"])(["getAllAttendances","getOneAttendance","getAllClients","getAllSchedules","getClientsPageSize","getErrors","loadingState"])),methods:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["attendanceAdd","attendanceUpdate","attendanceDelete","fetchClients","fetchSchedules","fetchClientsPageSize","fetchAttendances","clearErrors","setLoadingState"])),{},{toggleActions:function(){this.actions=!this.actions,"dodatne opcije"===this.btn_title?this.btn_title="sakrij":this.btn_title="dodatne opcije"},searchClientsAdd:function(e){return this.input=e,this.submitted=!1,this.notClients.filter((function(t){return t.first_name.toLowerCase().startsWith(e.toLowerCase())}))},getResultValue:function(e){return e.last_name+", "+e.first_name+" - "+e.mobile},handleSubmit:function(e){this.submittedResult=e,this.foundClient.client=e,this.foundClient._id=this.foundClient.client._id},handleFormSubmit:function(e){var t=this;e.preventDefault(),this.foundClient._id&&(this.attendanceInput.members.unshift(this.foundClient),this.notClients.splice(this.notClients.findIndex((function(e){return e._id===t.foundClient._id})),1),this.foundClient={_id:"",note:"",present:!0},this.input="",this.value="",this.$refs.autocomplete.value="")},removeClient:function(e){this.attendanceInput.members.splice(this.filteredClients.findIndex((function(t){return t._id===e._id})),1),this.notClients.push(e.client)},presentClients:function(){return this.filteredClients.filter((function(e){return!0===e.present})).length},selectDate:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a,s,r,i,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.attendanceInput._id=null,e.getOneAttendance._id){t.next=20;break}return t.next=4,e.fetchSchedules();case 4:return n=e.attendanceInput.attend_date.getDay(),a=["Neđelja","Poneđeljak","Utorak","Srijeda","Četvrtak","Petak","Subota"],s=a[n],t.next=9,e.getAllSchedules.filter((function(e){return e.weekday.includes(s)}));case 9:return r=t.sent,e.checkAttendance(s),e.selectSchedules(r),i=r.filter((function(e){return this.indexOf(e.title+"/"+e.startTime)>=0}),e.selectedSchedules).map((function(e){var t={};return t={members:e.members,group:e.title+"/"+e.startTime},t})).map((function(e){var t={};return t=e.members,t})),t.next=15,[].concat.apply([],i);case 15:c=t.sent,e.attendanceInput.members=[],e.filteredClients=[],l=e.existingMembers?c.filter((function(e){return this.indexOf(e.client._id)<0}),e.existingMembers):c,e.addAllMembers(l);case 20:case"end":return t.stop()}}),t)})))()},selectSchedules:function(e){this.schedules=e.map((function(e){var t={};return t={members:e.members,group:e.title+"/"+e.startTime},t})).map((function(e){var t=e.group;return t}))},checkSchedule:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loadingMembers=!0,t.selectedSchedules.includes(e)?t.selectedSchedules.splice(t.selectedSchedules.indexOf(e),1):t.selectedSchedules.push(e),n.next=4,t.selectDate();case 4:t.loadingMembers=!1;case 5:case"end":return n.stop()}}),n)})))()},checkAttendance:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,s,r,i,c,l,u,o,d,m;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.attendanceExist=!1,t.attendanceMembers=[],t.existingMembers=[],n.next=5,t.getAllAttendances.filter((function(e){return A()(e.attend_date).format("YYYY-MM-DD")===A()(t.attendanceInput.attend_date).format("YYYY-MM-DD")}));case 5:if(a=n.sent,!a.length){n.next=24;break}for(t.attendanceInput._id=a[0]._id,t.attendanceMembers=a[0].members,s=a[0].members.map((function(e){var t=e.client._id;return t})),t.existingMembers=s,r=[],i=0;i<s.length;i++)r.push(t.setClientSchedule(s[i]));for(c=null,l=0,u=[],r.sort(),o=0;o<=r.length;o++)r[o]!=c?(l>0&&(d={},d.group=c,d.mems=l,u.push(d)),c=r[o],l=1):l++;return n.next=20,t.getAllSchedules.filter((function(t){return t.weekday.includes(e)})).map((function(e){var t={};return t={group:e.title+"/"+e.startTime,mems:e.members.length},t}));case 20:t.schedules=n.sent,m=t.schedules.filter((function(e){return!u.some((function(t){return e.group===t.group&&e.mems===t.mems}))})).map((function(e){return e.group})),t.schedules=m,t.attendanceExist=!0;case 24:case"end":return n.stop()}}),n)})))()},addAttendance:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.setLoadingState(!0),!e.getOneAttendance._id&&!e.attendanceExist){t.next=9;break}return e.attendanceInput.members=[].concat(Object(r["a"])(e.attendanceInput.members),Object(r["a"])(e.attendanceMembers)),t.next=5,e.attendanceUpdate(e.attendanceInput);case 5:return t.next=7,e.fetchAttendances();case 7:t.next=13;break;case 9:return t.next=11,e.attendanceAdd(e.attendanceInput);case 11:return t.next=13,e.fetchAttendances();case 13:e.setLoadingState(!1),e.getErrors.length?(e.$toast.error("Greška! "+e.getErrors,"OK",e.notificationSystem.options.error),e.clearErrors()):(e.$toast.success("Uspješno sačuvano!","OK",e.notificationSystem.options.success),e.$router.push("/attendances"));case 15:case"end":return t.stop()}}),t)})))()},addAllMembers:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:for(a=0;a<e.filter((function(e){return!1!==e.client.active})).length;a++)t.attendanceInput.members.push({client:e[a].client,present:!0,note:"",_id:e[a]._id});t.attendanceInput.members.sort((function(e,t){return e.client.last_name.toLowerCase()>t.client.last_name.toLowerCase()?1:-1})),t.initItems();case 3:case"end":return n.stop()}}),n)})))()},mapMembers:function(){return this.attendanceInput.members.map((function(e){var t={};return t=e.client,t}))},delEx:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.attendanceDelete(e.getOneAttendance);case 2:e.$toast.success("Uspješno obrisano!","OK",e.notificationSystem.options.success),e.$router.push("/attendances");case 4:case"end":return t.stop()}}),t)})))()},sortItems:function(e,t){var n=this;this.sortOrder=!this.sortOrder,this.attendanceInput.members.sort((function(a,s){var r,i;return t?(r=a.client[e].toLowerCase(),i=s.client[e].toLowerCase()):(r=a[e],i=s[e]),n.sortOrder?r>i?-1:1:r>i?1:-1}))},searchItems:function(){var e=arguments,t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:"",n.next=3,t.initItems();case 3:s=t.attendanceInput.members.filter((function(e){return e.client.first_name.toLowerCase().includes(a.toLowerCase())||e.client.last_name.toLowerCase().includes(a.toLowerCase())||e.client.mobile.includes(a)})),t.filteredClients=s;case 5:case"end":return n.stop()}}),n)})))()},initItems:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.getOneAttendance._id){t.next=7;break}for(e.attendanceInput=e.getOneAttendance,n=0;n<e.attendanceInput.members.length;n++)e.attendanceInput.members[n].group=e.setClientSchedule(e.attendanceInput.members[n].client._id);e.notClients=e.getAllClients.filter((function(t){return!e.mapMembers().find((function(e){var n=e._id;return t._id===n}))})),e.filteredClients=e.attendanceInput.members,t.next=11;break;case 7:return t.next=9,e.getAllClients.filter((function(t){return!e.mapMembers().find((function(e){var n=e._id;return t._id===n}))}));case 9:e.notClients=t.sent,e.filteredClients=e.attendanceInput.members;case 11:10!==e.getClientsPageSize&&(e.pageSize=e.getClientsPageSize);case 12:case"end":return t.stop()}}),t)})))()}}),mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=new Date,n=A()().format("YYYY"),e.year=n,e.getAllClients.length){t.next=6;break}return t.next=6,e.fetchClients();case 6:return t.next=8,e.initItems();case 8:if(e.getOneAttendance._id){t.next=11;break}return t.next=11,e.selectDate();case 11:e.setLoadingState(!1);case 12:case"end":return t.stop()}}),t)})))()}},y=j,M=(n("f1ab"),n("2877")),z=Object(M["a"])(y,a,s,!1,null,null,null);t["default"]=z.exports},1458:function(e,t,n){"use strict";var a=n("2a47"),s=n.n(a);s.a},"23d6":function(e,t,n){},2482:function(e,t,n){"use strict";var a=n("6c3d"),s=n.n(a);s.a},"2a47":function(e,t,n){},"45fc":function(e,t,n){"use strict";var a=n("23e7"),s=n("b727").some,r=n("a640"),i=n("ae40"),c=r("some"),l=i("some");a({target:"Array",proto:!0,forced:!c||!l},{some:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},"6c3d":function(e,t,n){},7098:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},[e.loadingState?n("loading",{key:"1",attrs:{pic:"loading"}}):n("div",{key:"2",staticClass:"client__wrapper"},[n("div",{staticClass:"clients__manipulate"},[n("div",{staticClass:"clients__actions"},[n("button",{staticClass:"action_btn client__add",attrs:{type:"submit"},on:{click:function(t){return e.newAttendance()}}},[n("svg",{attrs:{fill:"var(--purple)",width:"50px",height:"50px",viewBox:"0 0 1106.000000 1280.000000",preserveAspectRatio:"xMidYMid meet"}},[n("g",{attrs:{transform:"translate(0.000000,1280.000000) scale(0.100000,-0.100000)",fill:"var(--purple)",stroke:"none"}},[n("path",{attrs:{d:"M1975 12688 c-61 -121 -60 -116 -39 -245 9 -57 0 -87 -41 -132 -33\n          -36 -38 -38 -78 -34 -56 7 -133 -31 -178 -87 -18 -22 -38 -40 -45 -40 -31 0\n          -55 -36 -64 -98 -7 -48 -16 -71 -39 -98 -17 -19 -33 -44 -35 -57 -2 -12 -9\n          -49 -16 -82 -7 -33 -15 -98 -19 -145 -6 -59 -16 -103 -35 -145 -16 -33 -46\n          -118 -67 -190 -91 -298 -117 -364 -242 -610 -67 -133 -107 -205 -170 -305 -33\n          -52 -71 -115 -85 -140 -14 -25 -35 -61 -46 -80 -12 -19 -27 -46 -33 -60 -6\n          -14 -23 -50 -37 -79 -14 -30 -26 -60 -26 -67 0 -6 -6 -17 -13 -23 -8 -6 -20\n          -30 -27 -53 -18 -58 -26 -66 -69 -74 -20 -4 -48 -13 -63 -20 -15 -8 -37 -14\n          -50 -14 -27 -1 -122 -53 -172 -95 -47 -39 -63 -86 -76 -215 -6 -58 -17 -132\n          -24 -165 -8 -33 -19 -87 -26 -120 -33 -158 -93 -344 -125 -385 -21 -27 -35\n          -120 -35 -229 0 -109 3 -122 60 -271 12 -30 24 -64 27 -74 15 -48 80 -168 131\n          -241 66 -94 187 -239 321 -385 114 -123 238 -264 266 -301 23 -30 117 -144\n          144 -174 10 -11 45 -52 77 -90 33 -39 69 -81 81 -95 12 -14 50 -61 85 -105 83\n          -106 142 -176 204 -244 27 -31 84 -101 124 -156 122 -164 230 -293 349 -415\n          165 -168 179 -186 197 -266 8 -38 19 -85 25 -104 5 -19 16 -206 24 -415 27\n          -700 36 -800 105 -1120 11 -55 25 -122 30 -150 5 -27 16 -77 25 -110 27 -99\n          45 -176 60 -260 7 -44 18 -100 24 -125 6 -25 10 -70 11 -100 0 -30 7 -104 16\n          -165 13 -87 15 -158 11 -345 -7 -275 -32 -677 -47 -737 -8 -35 -7 -51 10 -94\n          24 -60 75 -115 122 -131 51 -17 84 -44 98 -80 6 -18 16 -41 21 -51 5 -9 22\n          -50 38 -90 16 -39 67 -146 114 -237 47 -91 99 -203 117 -250 18 -47 38 -98 45\n          -115 39 -98 80 -230 111 -360 13 -55 28 -113 34 -130 6 -16 15 -109 21 -205 9\n          -162 29 -280 47 -280 4 0 13 -13 20 -30 8 -16 19 -30 25 -30 6 0 19 -8 30 -18\n          17 -15 48 -17 286 -19 146 -1 287 -6 314 -11 29 -6 65 -6 92 0 49 11 170 8\n          516 -12 204 -11 229 -11 257 4 17 9 40 16 52 16 24 0 60 53 60 91 0 54 -30\n          125 -72 172 -24 26 -49 47 -56 47 -7 0 -34 16 -59 35 -25 19 -50 35 -55 35 -5\n          0 -16 7 -24 15 -9 8 -24 15 -33 15 -10 0 -24 7 -31 15 -7 8 -19 15 -27 15 -7\n          0 -24 7 -38 16 -19 12 -28 13 -46 4 -14 -8 -39 -10 -68 -6 -62 10 -69 9 -123\n          -4 -42 -10 -52 -9 -101 14 -30 14 -58 30 -62 35 -3 6 -16 11 -28 11 -12 1 -40\n          12 -62 25 -22 14 -51 30 -64 35 -26 12 -82 65 -94 90 -4 8 -23 40 -42 70 -63\n          102 -92 174 -120 300 -9 41 -21 89 -26 105 -6 17 -19 75 -29 130 -11 55 -25\n          123 -30 150 -11 57 -67 433 -81 545 -5 41 -6 89 -3 107 3 17 -1 60 -9 95 -10\n          40 -18 141 -22 273 -5 143 -12 225 -22 257 -12 37 -13 54 -4 79 21 60 10 115\n          -29 145 -12 10 -13 19 0 65 10 38 15 118 16 274 2 370 11 495 46 610 16 55 34\n          116 38 135 4 19 13 56 19 83 6 26 16 68 22 95 14 63 28 353 29 590 0 107 4\n          202 10 212 7 13 27 20 72 25 35 4 72 12 83 19 11 6 103 16 205 22 282 18 438\n          39 517 69 37 15 93 36 123 48 30 12 102 47 161 79 73 40 130 63 180 73 41 9\n          97 26 125 39 29 13 67 27 85 31 62 12 172 66 269 133 65 45 117 94 244 235 38\n          43 75 77 83 77 7 0 13 4 13 8 0 11 56 37 99 47 51 11 111 57 192 147 80 89\n          163 174 247 252 66 61 142 149 142 165 0 6 6 22 14 34 13 19 54 159 70 238 3\n          15 14 30 23 34 10 4 149 13 308 20 353 17 361 18 740 118 94 25 208 54 255 66\n          116 29 205 56 270 80 55 21 93 27 223 35 50 3 80 12 113 31 25 15 125 53 222\n          85 261 87 428 149 532 197 30 14 98 45 150 68 110 49 457 220 474 233 6 5 55\n          33 108 61 94 50 103 52 265 76 239 36 300 56 408 133 28 20 92 58 144 84 149\n          77 208 117 222 150 9 23 10 31 0 37 -16 11 1 23 62 46 59 22 80 51 76 103 -2\n          28 3 47 19 67 22 28 29 79 13 104 -5 7 -29 16 -55 18 -43 5 -46 7 -46 35 0 57\n          -14 68 -88 68 -37 0 -83 -5 -102 -11 -61 -18 -183 -49 -184 -47 -23 67 -74 87\n          -117 45 -13 -13 -41 -31 -61 -40 -20 -10 -40 -22 -43 -27 -3 -6 -15 -10 -25\n          -10 -11 0 -35 -9 -55 -20 -19 -11 -56 -25 -81 -31 -53 -14 -92 -48 -188 -166\n          -65 -79 -143 -143 -176 -143 -8 0 -74 -23 -145 -51 -72 -28 -148 -56 -171 -64\n          -22 -7 -74 -27 -115 -45 -149 -64 -388 -135 -574 -170 -55 -10 -138 -28 -185\n          -40 -47 -12 -101 -25 -120 -29 -49 -11 -123 -37 -189 -67 -65 -29 -67 -30\n          -146 -74 -134 -74 -142 -77 -335 -99 -184 -22 -274 -37 -505 -86 -66 -13 -136\n          -25 -155 -25 -34 0 -176 26 -191 36 -4 2 -54 13 -111 23 -57 11 -159 33 -228\n          50 -69 16 -156 34 -195 39 -96 14 -125 26 -125 54 0 29 28 104 57 150 13 21\n          23 44 23 51 0 7 4 17 8 23 5 5 16 29 25 54 11 27 49 80 97 134 44 49 80 92 80\n          97 0 5 24 22 53 39 51 29 54 30 200 30 217 0 247 18 247 146 0 51 6 85 21 119\n          17 38 19 52 10 72 -8 18 -8 30 0 45 10 19 9 47 -5 108 -5 22 -1 28 36 45 30\n          14 49 33 62 59 18 36 18 39 1 76 -9 21 -35 58 -57 82 -80 87 -85 104 -92 283\n          -6 182 -19 312 -36 369 -8 25 -34 62 -74 102 -61 61 -97 84 -136 84 -10 0 -41\n          14 -68 30 -53 33 -137 60 -190 60 -19 0 -49 7 -68 16 -29 14 -45 15 -110 5\n          -41 -6 -115 -11 -164 -11 -106 0 -172 -13 -254 -50 -73 -32 -238 -147 -284\n          -196 -34 -37 -72 -104 -72 -126 0 -7 -11 -40 -24 -73 -30 -77 -43 -120 -51\n          -170 -9 -59 -34 -172 -53 -238 -13 -46 -23 -62 -49 -78 -18 -11 -33 -24 -33\n          -29 0 -4 -25 -19 -55 -34 -30 -14 -55 -29 -55 -33 0 -13 -86 -63 -107 -63 -11\n          0 -26 6 -32 14 -7 8 -26 21 -44 30 -18 9 -39 20 -47 25 -8 5 -26 13 -40 19\n          -14 6 -117 56 -230 111 l-205 101 -145 130 c-80 72 -165 151 -190 177 -47 49\n          -196 177 -265 228 -156 115 -302 263 -369 375 -45 75 -50 82 -89 137 -20 29\n          -55 72 -78 95 -23 24 -47 51 -54 61 -34 48 -296 305 -400 392 -38 32 -92 84\n          -118 114 -27 31 -77 83 -110 116 -63 60 -99 104 -228 273 -74 99 -143 207\n          -165 257 -7 17 -19 66 -28 110 -9 44 -21 89 -26 100 -5 11 -23 55 -41 98 -30\n          75 -31 82 -26 185 3 59 10 141 17 182 14 87 7 211 -15 264 -8 19 -15 57 -15\n          84 0 34 -6 57 -20 75 -11 14 -26 38 -33 54 -6 16 -33 47 -58 71 -40 36 -52 42\n          -92 42 l-45 0 -57 -112z m331 -1815 c43 -54 84 -105 89 -114 9 -15 88 -130\n          187 -272 18 -27 68 -96 111 -153 42 -58 81 -113 86 -122 5 -9 37 -51 70 -92\n          34 -41 96 -119 139 -174 42 -54 116 -138 164 -187 87 -88 138 -156 138 -183 0\n          -8 23 -36 51 -63 28 -26 82 -88 119 -138 93 -123 225 -282 419 -504 104 -120\n          307 -320 426 -419 120 -101 195 -170 225 -209 14 -17 48 -60 75 -95 l50 -63\n          -1 -125 c-1 -105 -5 -131 -22 -165 -12 -22 -26 -71 -32 -110 -6 -38 -18 -82\n          -26 -97 -10 -18 -13 -40 -9 -60 4 -22 0 -48 -13 -79 -17 -38 -28 -49 -64 -63\n          -89 -36 -138 -93 -173 -204 -13 -40 -28 -62 -63 -90 -25 -20 -77 -69 -116\n          -107 -44 -43 -92 -80 -124 -95 -48 -21 -56 -23 -85 -11 -18 7 -52 18 -77 25\n          -25 6 -59 20 -75 31 -29 20 -214 113 -345 173 -36 17 -114 40 -174 51 -60 12\n          -112 24 -117 27 -8 5 -97 18 -224 33 -33 4 -70 12 -82 19 -12 7 -54 12 -93 12\n          -51 0 -81 5 -108 19 -20 11 -62 32 -92 47 -30 15 -66 35 -79 45 -13 11 -28 19\n          -33 19 -5 0 -40 26 -77 58 -37 31 -101 85 -142 119 -41 33 -96 84 -124 112\n          -110 111 -387 364 -500 456 -109 88 -196 167 -265 239 -14 15 -38 40 -55 57\n          -26 27 -30 40 -33 101 -4 63 -2 72 20 96 28 31 88 124 88 138 0 5 27 47 59 94\n          68 97 162 261 175 305 13 42 19 266 9 306 -9 33 -7 43 81 457 14 62 29 127 34\n          145 6 18 15 73 22 122 7 50 18 122 25 160 7 39 16 104 20 145 3 41 13 98 20\n          125 8 28 19 81 25 119 19 117 74 194 132 182 43 -9 184 11 230 33 24 10 46 20\n          49 20 3 1 41 -43 85 -96z"}})])]),n("p",[e._v("Nova prisustva")])]),n("Period",{attrs:{isGrid:!0},on:{dates:e.startPeriod,"filter-period":e.filterItems}})],1),n("search-bar",{attrs:{searchStr:e.search,pageSizeNr:e.pageSize,searchType:"traži (dan, mjesec, godina)"},on:{changed:e.setPageSize,typed:e.searchItems}}),n("div",{},[n("div",{staticClass:"days__list attend__heading"},[n("span",[e._v("Datum")]),n("span",[e._v("Prisustvovale")]),n("span",[e._v("Napomena")])]),e._l(e.pageOfItems,(function(t){return n("div",{key:t._id,staticClass:"clients__list attend__list",on:{click:function(n){return e.selectAttendance(t)}}},[n("p",{staticClass:"client__item"},[e._v(" "+e._s(e._f("formatDate")(t.attend_date))+" ")]),n("p",{staticClass:"client__item attend__check"},[e._v(" "+e._s(e.mapAttendances(t))+" ")]),n("p",{staticClass:"client__item"},[e._v(e._s(t.notes))])])}))],2)],1)]),n("jw-pagination",{staticClass:"pagine",attrs:{items:e.filteredClients,initialPage:e.initialPage,pageSize:e.pageSize,labels:e.customLabels,styles:e.customStyles},on:{changePage:e.onChangePage}})],1)},s=[],r=(n("4de4"),n("caad"),n("13d5"),n("2532"),n("96cf"),n("1da1")),i=n("5530"),c=n("2f62"),l=n("7d33"),u=n("d149"),o=n("8351"),d=n("2f60"),m=n("7146"),p=n("c7e8"),h=n("87fd"),f=n("5a0c"),g=n.n(f),_=n("f1e9"),b=n.n(_);g.a.locale(b.a);var v={name:"Attendances",components:{Loading:l["a"],SearchBar:o["a"],Period:d["a"]},mixins:[m["a"],p["a"],h["a"]],data:function(){return{customLabels:u["a"],customStyles:u["b"]}},computed:Object(i["a"])({},Object(c["c"])(["getAllAttendances","getClientsPage","getClientsPageSize","loadingState"])),methods:Object(i["a"])(Object(i["a"])({},Object(c["b"])(["fetchAttendances","fetchAttendance","fetchClientsPage","fetchClientsPageSize","attendanceClear","setLoadingState"])),{},{newAttendance:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.setLoadingState(!0),e.$router.push("/attendance"),t.next=4,e.attendanceClear();case 4:case"end":return t.stop()}}),t)})))()},selectAttendance:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.setLoadingState(!0),n.next=3,t.fetchAttendance(e);case 3:t.setPageNr(),t.$router.push("/attendance");case 5:case"end":return n.stop()}}),n)})))()},mapAttendances:function(e){return e.members.reduce((function(e,t){var n=t.present;return e+n}),0)},searchItems:function(){var e=arguments,t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:"",n.next=3,t.initItems();case 3:s=t.getAllAttendances.filter((function(e){return t.$options.filters.formatDate(e.attend_date).toLowerCase().includes(a.toLowerCase())||e.notes.includes(a.toLowerCase())})),t.filteredClients=s;case 5:case"end":return n.stop()}}),n)})))()},startPeriod:function(e,t){this.filterItems(e,t)},filterItems:function(e,t){this.dateFrom=e,this.dateTill=t;var n=this.getAllAttendances.filter((function(n){return g()(n.attend_date).format("YYYY-MM-DD")>=g()(e).format("YYYY-MM-DD")&&g()(n.attend_date).format("YYYY-MM-DD")<=g()(t).format("YYYY-MM-DD")}));this.filteredClients=n},initItems:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.getAllAttendances.length){t.next=3;break}return t.next=3,e.fetchAttendances();case 3:e.filteredClients=e.getAllAttendances,e.startPeriod(e.dateFrom,e.dateTill),1!==e.getClientsPage&&(e.initialPage=e.getClientsPage),10!==e.getClientsPageSize&&(e.pageSize=e.getClientsPageSize);case 7:case"end":return t.stop()}}),t)})))()}}),filters:{formatDate:function(e){if(e)return g()(String(e)).format("dddd, DD. MMM YYYY")}},mounted:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.initItems();case 2:e.setLoadingState(!1);case 3:case"end":return t.stop()}}),t)})))()}},C=v,x=(n("1458"),n("2877")),w=Object(x["a"])(C,a,s,!1,null,null,null);t["default"]=w.exports},a3d3:function(e,t,n){"use strict";n("4de4");t["a"]={methods:{mapSchedules:function(){for(var e,t=[],n=0;n<this.getAllSchedules.length;n++)for(var a=0;a<this.getAllSchedules[n].members.length;a++)e={title:this.getAllSchedules[n].title,startTime:this.getAllSchedules[n].startTime,client:this.getAllSchedules[n].members[a].client},t.push(e);return t},setClientSchedule:function(e){var t="";return t=this.mapSchedules().filter((function(t){return t.client._id==e})),t[0]?t[0].title+"/"+t[0].startTime:"Nema grupu"}}}},bdb2:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.checkClass},[n("label",{staticClass:"dan",attrs:{for:e.checkId}},[e._v(" "+e._s(e.label)+" ")]),n("input",{staticClass:"inp-cbx",staticStyle:{display:"none"},attrs:{id:e.checkId,type:"checkbox"},domProps:{checked:e.isChecked,value:e.value},on:{change:e.updateInput}}),n("label",{staticClass:"cbx",attrs:{for:e.checkId}},[n("span",[n("svg",{attrs:{width:"12px",height:"9px",viewbox:"0 0 12 9"}},[n("polyline",{attrs:{points:"1 5 4 8 11 1"}})])])])])},s=[],r=(n("caad"),n("c975"),n("a434"),n("2532"),n("2909")),i={name:"CheckboxCustom",model:{prop:"modelValue",event:"change"},props:{value:{type:String,default:""},modelValue:{default:""},label:{type:String},trueValue:{default:!0},falseValue:{default:!1},checkId:{type:String,default:"cbx"},checkClass:{type:String,default:""}},computed:{isChecked:function(){return this.modelValue instanceof Array?this.modelValue.includes(this.value):this.modelValue===this.trueValue}},methods:{updateInput:function(e){var t=e.target.checked;if(this.modelValue instanceof Array){var n=Object(r["a"])(this.modelValue);t?n.push(this.value):n.splice(n.indexOf(this.value),1),this.$emit("change",n)}else this.$emit("change",t?this.trueValue:this.falseValue)}}},c=i,l=(n("2482"),n("2877")),u=Object(l["a"])(c,a,s,!1,null,null,null);t["a"]=u.exports},f1ab:function(e,t,n){"use strict";var a=n("23d6"),s=n.n(a);s.a}}]);
//# sourceMappingURL=attendance.48f54e82.js.map